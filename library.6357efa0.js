(()=>{const e={openModalBtn:document.querySelector("[data-modal-team-open]"),closeModalBtn:document.querySelector("[data-modal-team-close]"),modal:document.querySelector("[data-modal-team]")};function t(o){"Escape"!==o.code||e.modal.classList.contains("is-hidden")||(a(),document.removeEventListener("keydown",t))}function a(){e.modal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",(e=>{a(),document.addEventListener("keydown",t)})),e.closeModalBtn.addEventListener("click",a),document.addEventListener("click",(function(t){t.target===e.modal&&a()}))})();const e=document.querySelector(".modal__movie-box");let t=async t=>{e.innerHTML="";const{imgAlt:a,poster_path:o,title:n,name:s,genres:l,vote_average:d,vote_count:i,popularity:c,overview:r}=t;let m=`https://image.tmdb.org/t/p/w300${o}`;null===o&&(m=new URL("https://picsum.photos/id/237/274/398"));let u=`<div class="modal__movie-box-separation">\n                <div class="modal__movie-box-photo"><img class="modal__movie-image" src="${m}"  alt="Poster of: ${a}"\n                        loading="lazy"></div>\n                <div class="modal__movie-box-info">\n                    <h2 class="modal__movie-box-title">${n||s}</h2>\n                    <ul class="modal__movie-box-details">\n                        <li class="modal__movie-details-li"><span class="modal__movie-details-label">Vote /Votes </span><span><span class="modal__movie-details-vote">${Number(d).toFixed(1)}</span> / ${i}</span></span></li>\n                        </li>\n                        <li class="modal__movie-details-li"><span class="modal__movie-details-label">Popularity</span><span\n                                class="modal__movie-details-value">${Number(c).toFixed(0)}</span></li>\n                        <li class="modal__movie-details-li"><span class=" modal__movie-details-label">Original Title</span><span\n                                class="modal__movie-details-value modal__movie-details-title">${n||s}</span></li>\n                        <li class="modal__movie-details-li"><span class=" modal__movie-details-label">Genre</span><span\n                                class="modal__movie-details-value">${l.map((e=>e.name)).join(", ")}</span></li>\n                        </li>\n                    </ul>\n                    <h3 class="modal__movie-about-label">About</h3>\n                    <p class="modal__movie-about-text">${r}</p>\n                    <div class="modal__movie-btns--wrapper">\n                        <button type="button" class="modal__movie-btns modal__movie-btns--watch" data-name="watched"\n                            >Add to watched</button>\n                        <button type="button" class="modal__movie-btns modal__movie-btns-queue" data-name="queue">Add\n                            to queue</button>\n                    </div>\n                </div>\n            </div>`;return e.insertAdjacentHTML("beforeend",u)};const a=e=>{const t=JSON.parse(localStorage.getItem("queue"))||[];if(!t.find((t=>t.media_type===e.media_type&&t.id===e.id))){t.push(e);try{localStorage.setItem("queue",JSON.stringify(t))}catch(e){console.error("Set state error: ",e.message)}}},o=e=>{const t=JSON.parse(localStorage.getItem("watched"))||[];if(!t.find((t=>t.media_type===e.media_type&&t.id===e.id))){t.push(e);try{localStorage.setItem("watched",JSON.stringify(t))}catch(e){console.error("Set state error: ",e.message)}}};(()=>{const n={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};function s(){n.modal.classList.toggle("is-hidden")}n.openModalBtn.addEventListener("click",(e=>{if("movie-card"!==e.target.offsetParent.className)return;s();let d=e.target.offsetParent.dataset.id,i=JSON.parse(localStorage.getItem(l))[d];t(i),n.modal.addEventListener("click",(e=>{"queue"===e.target.dataset.name&&a(i),"watched"===e.target.dataset.name&&o(i)}))})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&s()})),n.closeModalBtn.addEventListener("click",(()=>{e.innerHTML="",s()}))})();let n=document.querySelector(".top-btn");n.onclick=()=>window.scrollTo({top:0,behavior:"smooth"}),window.onscroll=()=>window.scrollY>500?n.style.opacity=1:n.style.opacity=0;const s=document.querySelector(".gallery");let l="";const d=async e=>{s.innerHTML="";let t=0;const a=e.map((({id:e,media_type:a,poster_path:o,release_date:n,first_air_date:s,title:l,name:d,genres:i})=>{let c=n||s||"????";if("person"!==a)return`<div class="movie-card" data-id="${t++}" data-type="${a||"movie"}">\n      <img class="movie-card__img" src="https://image.tmdb.org/t/p/w500/${o}" onerror="this.src = 'https://picsum.photos/id/237/274/398'";alt="image of movie" loading="lazy" />\n      <div class="movie-card__info">\n          <p class="movie-card__title">\n              <span>${l||d}</span>\n          </p>\n      <div class= "genreDate">\n          <p class="movie-card__genre">\n              <span>${i.map((e=>e.name)).splice(0,2).join(", ")}</span>\n          </p>\n          <p class="movie-card__year">| ${c.slice(0,4)||""}\n              <span></span>\n          </p>\n      </div>\n      </div>\n  </div>\n  `})).join("");return s.insertAdjacentHTML("beforeend",a)},i=async()=>{try{const e=JSON.parse(localStorage.getItem("watched"))||[];if(null===e)return;return l="watched",e}catch(e){console.log(e)}},c={btnWatchedHeaderEl:document.querySelector(".header-watched"),btnQueueHeaderEl:document.querySelector(".header-queue")};c.btnWatchedHeaderEl.addEventListener("click",(async()=>{c.btnWatchedHeaderEl.classList.add("choosedBtn"),c.btnQueueHeaderEl.classList.remove("choosedBtn");const e=await i();d(e)})),c.btnQueueHeaderEl.addEventListener("click",(async()=>{c.btnQueueHeaderEl.classList.add("choosedBtn"),c.btnWatchedHeaderEl.classList.remove("choosedBtn");const e=await(async()=>{try{const e=JSON.parse(localStorage.getItem("queue"))||[];if(null===e)return;return l="queue",e}catch(e){console.log(e)}})();d(e)})),window.onload=async function(e){c.btnWatchedHeaderEl.classList.add("choosedBtn"),e.preventDefault();const t=await i();d(t)};
//# sourceMappingURL=library.6357efa0.js.map
