let e;const t=async()=>(e||(e=await(async()=>{const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=32592fc1c467ab313147df8555d6672d&language=en-US"),t=await fetch("https://api.themoviedb.org/3/genre/tv/list?api_key=32592fc1c467ab313147df8555d6672d&language=en-US"),n=await e.json(),s=await t.json();return[...new Map([...n.genres,...s.genres].map((e=>[e.id,e]))).values()]})()),e.reduce(((e,t)=>({...e,[t.id]:t.name})),{})),n=document.querySelector(".input-notification"),s=document.querySelector(".no-results__wrapper");const i=document.querySelector(".search-form__btn"),a=document.querySelector(".search-form__input"),o=document.querySelector(".gallery"),r=document.querySelector(".pagination_btns"),c=async(e,t=1)=>{const n=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=32592fc1c467ab313147df8555d6672d&query=${e}&page=${t}&include_adult=false`);return await n.json()};let l=async e=>{const n=await t();o.innerHTML="";const s=e.map((({poster_path:e,release_date:t,first_air_date:s,title:i,name:a,genre_ids:o})=>`<div class="movie-card">\n  <img class="movie-card__img" src="https://image.tmdb.org/t/p/w500/${e}" onerror="this.src = 'https://picsum.photos/id/237/274/398';" alt="image of movie" loading="lazy" />\n\n  <div class="movie-card__info">\n      <p class="movie-card__title">\n          <span>${i||a}</span>\n      </p>\n  <div class= "genreDate">\n      <p class="movie-card__genre">\n          <span>${o.map((e=>n[e])).join(", ")}</span>\n      </p>\n      <p class="movie-card__year">${t||s} \n          <span></span>\n      </p>\n  </div>\n  </div>\n</div>\n`)).join("");return o.insertAdjacentHTML("beforeend",s)};const d=async(e,t,n)=>{r.innerHTML="";const s=e+1;if(e>=1)for(let t=0;t<=s;t++){let i=document.createElement("button");if(0===t&&(i.innerHTML="<",i.addEventListener("click",(async()=>{if(1===n)return;const t=a.value.trim();try{const s=await c(t,n-1);console.log(s);const i=[];return s.results.forEach((async e=>{i.push(e)})),l(i),d(e,t,n-=1),n}catch(e){console.error(e)}}))),t===s&&(i.innerHTML=">",i.addEventListener("click",(async()=>{if(n===e)return;const t=a.value.trim();try{const s=await c(t,n+1);console.log(s);const i=[];return s.results.forEach((async e=>{i.push(e)})),l(i),d(e,t,n+=1),n}catch(e){console.error(e)}}))),e<=9&&t>=1&&t<=e&&(i.innerHTML=t,i.addEventListener("click",(async()=>{const e=a.value.trim();try{const n=await c(e,t);console.log(n);const s=[];n.results.forEach((async e=>{s.push(e)})),l(s)}catch(e){console.error(e)}}))),e>9&&t>0&&t<s)if(i.innerHTML=t,i.addEventListener("click",(async()=>{const s=a.value.trim();try{const i=await c(s,t);console.log(i);const a=[];return i.results.forEach((async e=>{a.push(e)})),l(a),d(e,s,n=t),n}catch(e){console.error(e)}})),1===t||t===e)i.innerHTML=t;else if(n>=5&&n>0&&2===t)i.innerHTML="...";else if(n<=e-4&&t===e-1)i.innerHTML="...";else if(t<n-2&&t<=e-7||t>n+2&&t>=8)continue;"..."===i.textContent&&(i.disabled=!0),r.appendChild(i)}};i.addEventListener("click",(async e=>{e.preventDefault();const t=a.value.trim();console.log(t);try{const e=await c(t);console.log(e);const i=[];e.results.forEach((async e=>{i.push(e)})),e.total_results?(n.style.visibility="hidden",n.style.display="none",s.style.visibility="hidden",s.style.display="none",r.style.visibility="visible",r.style.display="flex"):(n.style.visibility="visible",n.style.display="block",r.style.visibility="hidden",s.style.visibility="visible",s.style.display="block",o.innerHTML=""),l(i);const a=await e.total_pages,p=await e.total_results;console.log(`Total pages: ${a}`),console.log(`Total results: ${p}`),d(a,t,1)}catch(e){console.error(e)}}));const p=document.querySelector(".gallery");let y=async e=>{const n=await t(),s=e.map((({poster_path:e,release_date:t,first_air_date:s,title:i,name:a,genre_ids:o,id:r})=>`<div class="movie-card" id='${r}' >\n    <img class="movie-card__img" src="https://image.tmdb.org/t/p/w500/${e}" onerror="this.src = 'https://picsum.photos/id/237/274/398';alt="image of movie" loading="lazy" id='${r}' />\n    <div class="movie-card__info" id='${r}' >\n        <p class="movie-card__title" id='${r}' >\n          ${i||a}\n        </p>\n    <div class= "genreDate" id='${r}' >\n        <p class="movie-card__genre" id='${r}'>\n            ${o.map((e=>n[e])).join(", ")}\n        </p>\n        <p class="movie-card__year" id='${r}' >\n        ${t||s}  \n        </p>\n    </div>\n    </div>\n</div>\n`)).join("");return p.insertAdjacentHTML("beforeend",s)},u=document.querySelector(".top-btn");u.onclick=()=>window.scrollTo({top:0,behavior:"smooth"}),window.onscroll=()=>window.scrollY>500?u.style.opacity=1:u.style.opacity=0,(async()=>{const e=await fetch("https://api.themoviedb.org/3/trending/all/day?api_key=32592fc1c467ab313147df8555d6672d&page=1"),t=await e.json();return console.log(t),t})().then((e=>(y(e.results),e.results))).then((e=>{document.querySelector(".gallery").addEventListener("click",(t=>{if(t.target==document.querySelector(".gallery"))return;let n,s;n=e.findIndex((e=>e.id==t.target.id)),s=e[n],console.log(s)}))})).catch((e=>console.error(e)));
//# sourceMappingURL=index.593f4f2f.js.map
