{"mappings":"iiBACA,IAAAA,EAAAC,EAAA,S,wBCDA,IAAAC,EAAAD,EAAA,S,cASC,WACC,IAKIE,EACAC,EANEC,EAAO,CACXC,aAAcC,SAASC,cAAc,qBACrCC,cAAeF,SAASC,cAAc,sBACtCE,MAAOH,SAASC,cAAc,iBAiChC,SAASG,IACHR,IACFE,EAAKK,MAAME,oBAAoB,QAAST,GACxCA,EAAe,MAEbC,IACFG,SAASK,oBAAoB,UAAWR,GACxCA,EAAa,MAEfC,EAAKK,MAAMG,UAAUC,OAAO,Y,CAtC9BT,EAAKC,aAAaS,iBAAiB,SAAS,SAAAC,GAC1C,GAA4C,eAAxCA,EAAMC,OAAOC,aAAaC,UAA9B,CACAR,IACA,IAAIS,EAAUJ,EAAMC,OAAOC,aAAaG,QAAQC,GAC5CC,EAAQC,KAAKC,MAAMC,aAAaC,QAAQC,IAAYR,IACxD,EAAAlB,EAAA2B,UAASN,GACTpB,EAAe,SAAA2B,GACiB,UAA1BA,EAAEb,OAAOI,QAAQU,OAAkB,EAAAC,EAAAC,YAAWV,GACpB,gBAA1BO,EAAEb,OAAOI,QAAQU,OAAwB,EAAAC,EAAAE,iBAAgBX,GAC/B,YAA1BO,EAAEb,OAAOI,QAAQU,OAAoB,EAAAC,EAAAG,cAAaZ,GACxB,kBAA1BO,EAAEb,OAAOI,QAAQU,OAA0B,EAAAC,EAAAI,mBAAkBb,IACjE,EAAArB,EAAA2B,UAASN,E,EAEXnB,EAAa,SAAA0B,GACI,WAAXA,EAAEO,OACJ1B,IACA2B,SAASC,S,EAGblC,EAAKK,MAAMK,iBAAiB,QAASZ,GACrCI,SAASQ,iBAAiB,UAAWX,EAnBqB,C,IAsB5DC,EAAKI,cAAcM,iBAAiB,SAAS,WAC3Cb,EAAAsC,cAAcC,UAAY,GAC1B9B,IACA2B,SAASC,Q,GAcZ,CAhDA,G,WDFD,I,EA+G+BG,EA/GzBC,EAASpC,SAASC,cAAc,YAClCoB,EAAY,GACVgB,G,EAAkBC,EAAA7C,EAAA,CAAA6C,EAAAC,GAAAC,MAAA,SAAAC,EAAMC,G,IAExBC,EACEC,E,yEAFNR,EAAOF,UAAY,GACfS,EAAI,EACFC,EAASF,EACZG,KACC,SAAAC,GACIA,EAAF/B,G,IACAgC,EAAUD,EAAVC,WACAC,EAAWF,EAAXE,YACAC,EAAYH,EAAZG,aACAC,EAAcJ,EAAdI,eACAC,EAAKL,EAALK,MACA3B,EAAIsB,EAAJtB,KACA4B,EAAMN,EAANM,OAEIC,EAAWJ,GAAgBC,GAAkB,OACjD,GAAmB,WAAfH,EACJ,MAAO,oCACLO,OADyCX,IAAI,iBAGmBW,OAFhEP,GAAc,QACf,gFAIaO,OAHoDN,EAAY,+MAOhEM,OAJAH,GAAS3B,EAAK,0HASM8B,OALpBF,EACLP,KAAI,SAAAU,G,OAASA,EAAM/B,I,IACnBgC,OAAO,EAAG,GACVC,KAAK,MAAM,qEAEyCH,OAA3BD,EAASK,MAAM,EAAG,IAAM,GAAG,0F,IAShED,KAAK,I,kBACDrB,EAAOuB,mBAAmB,YAAaf,I,oDA1ClBF,G,iCA6CxBkB,EAAY,W,MAAGtB,EAAA7C,EAAA,CAAA6C,EAAAC,GAAAC,MAAA,SAAAC,I,IAEXoB,E,8EACQ,QADRA,EAAQ5C,KAAKC,MAAMC,aAAaC,QAAQ,WAAa,IACzC,C,uDAGlBC,EAAY,Q,kBACLwC,G,gCAEPC,QAAQC,IAAGC,EAAAC,I,2GATG,GAaZC,EAAc,W,MAAG5B,EAAA7C,EAAA,CAAA6C,EAAAC,GAAAC,MAAA,SAAAC,I,IAEb0B,E,8EACU,QADVA,EAAUlD,KAAKC,MAAMC,aAAaC,QAAQ,aAAe,IAC3C,C,uDAGpBC,EAAY,U,kBACL8C,G,gCAEPL,QAAQC,IAAGC,EAAAC,I,2GATK,GAmBdG,EAAO,CACXC,mBAAoBrE,SAASC,cAAc,mBAC3CqE,iBAAkBtE,SAASC,cAAc,kBAa3CmE,EAAKC,mBAAmB7D,iBAAiB,QAAS8B,EAAA7C,EAAA,CAAA6C,EAAAC,GAAAC,MAAA,SAAAC,I,IAG1C8B,E,yEAFNH,EAAKC,mBAAmB/D,UAAUkE,IAAI,cACtCJ,EAAKE,iBAAiBhE,UAAUmE,OAAO,c,SACdP,I,OAAnBK,EAAUP,EAAAU,KAChBrC,EAAgBkC,G,4CAElBH,EAAKE,iBAAiB9D,iBAAiB,QAAS8B,EAAA7C,EAAA,CAAA6C,EAAAC,GAAAC,MAAA,SAAAC,I,IAGxC8B,E,yEAFNH,EAAKE,iBAAiBhE,UAAUkE,IAAI,cACpCJ,EAAKC,mBAAmB/D,UAAUmE,OAAO,c,SAChBb,I,OAAnBW,EAAUP,EAAAU,KAChBrC,EAAgBkC,G,4CAOlBI,OAAOC,QAAwBzC,EAAfG,EAAA7C,EAAA,CAAA6C,EAAAC,GAAAC,MAAA,SAAAC,EAA8BlB,G,IAGtCgD,E,yEAFNH,EAAKC,mBAAmB/D,UAAUkE,IAAI,cACtCjD,EAAEsD,iB,SACuBX,I,OAAnBK,EAAUP,EAAAU,KAChBrC,EAAgBkC,G,oDAJ4BhD,G,OAAfY,EAAc2C,MAAAC,KAAAC,U","sources":["src/js/library.js","src/js/libraryModal.js"],"sourcesContent":["// import { movieSet } from './movieSet';\nimport './modal-team';\nimport './libraryModal';\nimport '../sass/index.scss';\nimport './scrollToTop';\n\n\nconst myList = document.querySelector('.gallery');\nlet situation = '';\nconst movieSetLibrary = async data => {\n  myList.innerHTML = '';\n  let i = 0;\n  const markup = data\n    .map(\n      ({\n        id,\n        media_type,\n        poster_path,\n        release_date,\n        first_air_date,\n        title,\n        name,\n        genres,\n      }) => {\n        let filmDate = release_date || first_air_date || '????';\n        if (media_type === 'person') return;\n        return `<div class=\"movie-card\" data-id=\"${i++}\" data-type=\"${\n          media_type || 'movie'\n        }\">\n      <img class=\"movie-card__img\" src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" onerror=\"this.src = 'https://picsum.photos/id/237/274/398'\";alt=\"image of movie\" loading=\"lazy\" />\n      <div class=\"movie-card__info\">\n          <p class=\"movie-card__title\">\n              <span>${title || name}</span>\n          </p>\n      <div class= \"genreDate\">\n          <p class=\"movie-card__genre\">\n              <span>${genres\n                .map(genre => genre.name)\n                .splice(0, 2)\n                .join(', ')}</span>\n          </p>\n          <p class=\"movie-card__year\">| ${filmDate.slice(0, 4) || ''}\n              <span></span>\n          </p>\n      </div>\n      </div>\n  </div>\n  `;\n      }\n    )\n    .join('');\n  return myList.insertAdjacentHTML('beforeend', markup);\n};\n\nconst getQueueData = async () => {\n  try {\n    const queue = JSON.parse(localStorage.getItem('queue')) || [];\n    if (queue === null) {\n      return;\n    }\n    situation = 'queue';\n    return queue;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst getWatchedData = async () => {\n  try {\n    const watched = JSON.parse(localStorage.getItem('watched')) || [];\n    if (watched === null) {\n      return;\n    }\n    situation = 'watched';\n    return watched;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// function findFilmByIdLs(id) {\n//     const films = [...getQueueData(), ...getWatchedData()]\n//     const film = films.find((film) => film.id == id)\n//     return film\n// }\n\nconst refs = {\n  btnWatchedHeaderEl: document.querySelector('.header-watched'),\n  btnQueueHeaderEl: document.querySelector('.header-queue'),\n};\n\n// const onWatchedBtnClick = async () => {\n//   const arrayFilms = await getWatchedData();\n//   movieSetLibrary(arrayFilms);\n// };\n\n// const onQueueBtnClick = async () => {\n//   const arrayFilms = await getQueueData();\n//   movieSetLibrary(arrayFilms);\n// };\n\nrefs.btnWatchedHeaderEl.addEventListener('click', async () => {\n  refs.btnWatchedHeaderEl.classList.add('choosedBtn');\n  refs.btnQueueHeaderEl.classList.remove('choosedBtn');\n  const arrayFilms = await getWatchedData();\n  movieSetLibrary(arrayFilms);\n});\nrefs.btnQueueHeaderEl.addEventListener('click', async () => {\n  refs.btnQueueHeaderEl.classList.add('choosedBtn');\n  refs.btnWatchedHeaderEl.classList.remove('choosedBtn');\n  const arrayFilms = await getQueueData();\n  movieSetLibrary(arrayFilms);\n});\n\n// onWatchedBtnClick();\n\nexport { situation };\n\nwindow.onload = async function libraryOnStart(e) {\n  refs.btnWatchedHeaderEl.classList.add('choosedBtn');\n  e.preventDefault();\n  const arrayFilms = await getWatchedData();\n  movieSetLibrary(arrayFilms);\n};\n","import { modalSet, movieModalBox } from './modalSet';\nimport {\n  addToQueue,\n  addToWatched,\n  removeFromWatched,\n  removeFromQueue,\n} from './Queue';\nimport { situation } from './library';\n\n(() => {\n  const refs = {\n    openModalBtn: document.querySelector('[data-modal-open]'),\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    modal: document.querySelector('[data-modal]'),\n  };\n  let clickHandler;\n  let escHandler;\n  refs.openModalBtn.addEventListener('click', event => {\n    if (event.target.offsetParent.className !== 'movie-card') return;\n    toggleModal();\n    let movieId = event.target.offsetParent.dataset.id;\n    let movie = JSON.parse(localStorage.getItem(situation))[movieId];\n    modalSet(movie);\n    clickHandler = e => {\n      if (e.target.dataset.name === 'queue') addToQueue(movie);\n      if (e.target.dataset.name === 'removeQueue') removeFromQueue(movie);\n      if (e.target.dataset.name === 'watched') addToWatched(movie);\n      if (e.target.dataset.name === 'removeWatched') removeFromWatched(movie);\n      modalSet(movie);\n    };\n    escHandler = e => {\n      if (e.code === 'Escape') {\n        toggleModal();\n        location.reload();\n      }\n    };\n    refs.modal.addEventListener('click', clickHandler);\n    document.addEventListener('keydown', escHandler);\n  });\n\n  refs.closeModalBtn.addEventListener('click', () => {\n    movieModalBox.innerHTML = '';\n    toggleModal();\n    location.reload();\n  });\n\n  function toggleModal() {\n    if (clickHandler) {\n      refs.modal.removeEventListener('click', clickHandler);\n      clickHandler = null;\n    }\n    if (escHandler) {\n      document.removeEventListener('keydown', escHandler);\n      escHandler = null;\n    }\n    refs.modal.classList.toggle('is-hidden');\n  }\n})();\n\n//const fetchOneMovie = key => {\n//   return fetch(\n//     `https://api.themoviedb.org/3/movie/${key}?api_key=32592fc1c467ab313147df8555d6672d`\n//   ).then(response => {\n//     if (!response.ok) throw new Error(response.status);\n//     return response.json();\n//   });\n// };\n// const fetchOneTV = key => {\n//   return fetch(\n//     `https://api.themoviedb.org/3/tv/${key}?api_key=32592fc1c467ab313147df8555d6672d`\n//   ).then(response => {\n//     if (!response.ok) throw new Error(response.status);\n//     return response.json();\n//   });\n// };\n"],"names":["$bpxeT","parcelRequire","$3Sjhd","clickHandler","escHandler","refs","openModalBtn","document","querySelector","closeModalBtn","modal","toggleModal","removeEventListener","classList","toggle","addEventListener","event","target","offsetParent","className","movieId","dataset","id","movie","JSON","parse","localStorage","getItem","$93effc6fc56091ad$export$3dc89641e6ee715a","modalSet","e","name","$fPBaN","addToQueue","removeFromQueue","addToWatched","removeFromWatched","code","location","reload","movieModalBox","innerHTML","_libraryOnStart","$93effc6fc56091ad$var$myList","$93effc6fc56091ad$var$movieSetLibrary","$parcel$interopDefault","$2TvXO","mark","_callee","data","i","markup","map","param","media_type","poster_path","release_date","first_air_date","title","genres","filmDate","concat","genre","splice","join","slice","insertAdjacentHTML","$93effc6fc56091ad$var$getQueueData","queue","console","log","_ctx","t0","$93effc6fc56091ad$var$getWatchedData","watched","$93effc6fc56091ad$var$refs","btnWatchedHeaderEl","btnQueueHeaderEl","arrayFilms","add","remove","sent","window","onload","preventDefault","apply","this","arguments"],"version":3,"file":"library.e812d9b0.js.map"}