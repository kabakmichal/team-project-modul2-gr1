(()=>{const e={openModalBtn:document.querySelector("[data-modal-team-open]"),closeModalBtn:document.querySelector("[data-modal-team-close]"),modal:document.querySelector("[data-modal-team]")};function t(){e.modal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t),document.addEventListener("keydown",(t=>{"Escape"===t.code&&e.modal.classList.add("is-hidden")}))})();(()=>{const e={openModalBtn:document.querySelector("[login-open]"),closeModalBtn:document.querySelector("[login-close]"),modal:document.querySelector("[login-modal]")};function t(){e.modal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t)})();const e=document.querySelector(".modal__movie-box");let t=async t=>{e.innerHTML="",console.log(t);const{imgAlt:a,poster_path:o,title:n,name:l,genres:s,vote_average:d,vote_count:i,popularity:c,overview:r}=t;let m=`https://image.tmdb.org/t/p/w300${o}`;null===o&&(m=new URL("https://picsum.photos/id/237/274/398"));let p=`<div class="modal__movie-box-separation">\n                <div class="modal__movie-box-photo"><img class="modal__movie-image" src="${m}"  alt="Poster of: ${a}"\n                        loading="lazy"></div>\n                <div class="modal__movie-box-info">\n                    <h2 class="modal__movie-box-title">${n||l}</h2>\n                    <ul class="modal__movie-box-details">\n                        <li class="modal__movie-details-li"><span class="modal__movie-details-label">Vote /Votes </span><span><span class="modal__movie-details-vote">${Number(d).toFixed(1)}</span> / ${i}</span></span></li>\n                        </li>\n                        <li class="modal__movie-details-li"><span class="modal__movie-details-label">Popularity</span><span\n                                class="modal__movie-details-value">${Number(c).toFixed(0)}</span></li>\n                        <li class="modal__movie-details-li"><span class=" modal__movie-details-label">Original Title</span><span\n                                class="modal__movie-details-value modal__movie-details-title">${n||l}</span></li>\n                        <li class="modal__movie-details-li"><span class=" modal__movie-details-label">Genre</span><span\n                                class="modal__movie-details-value">${s.map((e=>e.name)).join(", ")}</span></li>\n                        </li>\n                    </ul>\n                    <h3 class="modal__movie-about-label">About</h3>\n                    <p class="modal__movie-about-text">${r}</p>\n                    <div class="modal__movie-btns--wrapper">\n                        <button type="button" class="modal__movie-btns modal__movie-btns--watch" data-name="watched"\n                            >Add to watched</button>\n                        <button type="button" class="modal__movie-btns modal__movie-btns-queue" data-name="queue">Add\n                            to queue</button>\n                    </div>\n                </div>\n            </div>`;return e.insertAdjacentHTML("beforeend",p)};const a=e=>{if(""===e)return;const t=JSON.parse(localStorage.getItem("queue"))||[];if(!t.find((t=>t.media_type===e.media_type&&t.id===e.id))){t.push(e);try{console.log(t),localStorage.setItem("queue",JSON.stringify(t))}catch(e){console.error("Set state error: ",e.message)}}},o=e=>{if(""===e)return;const t=JSON.parse(localStorage.getItem("watched"))||[];if(console.log(t),console.log("first"),!t.find((t=>t.media_type===e.media_type&&t.id===e.id))){t.push(e);try{console.log(t),localStorage.setItem("watched",JSON.stringify(t))}catch(e){console.error("Set state error: ",e.message)}}};(()=>{const n={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};let l=0;function s(){n.modal.classList.toggle("is-hidden")}n.openModalBtn.addEventListener("click",(async e=>{if("movie-card"!==e.target.offsetParent.className)return;s();let d,i=e.target.offsetParent.dataset.id;var c;console.log(e.target.offsetParent.dataset.type),"movie"===e.target.offsetParent.dataset.type&&(d=await(c=i,fetch(`https://api.themoviedb.org/3/movie/${c}?api_key=32592fc1c467ab313147df8555d6672d`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})))),"tv"===e.target.offsetParent.dataset.type&&(d=await(e=>fetch(`https://api.themoviedb.org/3/tv/${e}?api_key=32592fc1c467ab313147df8555d6672d`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})))(i)),await t(d),n.modal.addEventListener("click",(e=>{l+=1,console.log(l),"queue"===e.target.dataset.name&&(a(d),d=""),"watched"===e.target.dataset.name&&(o(d),d="")}))})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&s()})),n.closeModalBtn.addEventListener("click",(()=>{e.innerHTML="",s()}))})();const n=document.querySelector(".gallery"),l=async e=>{n.innerHTML="";const t=e.map((({id:e,media_type:t,poster_path:a,release_date:o,first_air_date:n,title:l,name:s,genres:d})=>{let i=o||n||"????";if("person"!==t)return`<div class="movie-card" data-id="${e}" data-type="${t}">\n      <img class="movie-card__img" src="https://image.tmdb.org/t/p/w500/${a}" onerror="this.src = 'https://picsum.photos/id/237/274/398'";alt="image of movie" loading="lazy" />\n      <div class="movie-card__info">\n          <p class="movie-card__title">\n              <span>${l||s}</span>\n          </p>\n      <div class= "genreDate">\n          <p class="movie-card__genre">\n              <span>${d.map((e=>e.name)).splice(0,2).join(", ")}</span>\n          </p>\n          <p class="movie-card__year">| ${i.slice(0,4)||""}\n              <span></span>\n          </p>\n      </div>\n      </div>\n  </div>\n  `})).join("");return n.insertAdjacentHTML("beforeend",t)},s={btnWatchedHeaderEl:document.querySelector(".header-watched"),btnQueueHeaderEl:document.querySelector(".header-queue")};s.btnWatchedHeaderEl.addEventListener("click",(async()=>{const e=await(async()=>{try{const e=JSON.parse(localStorage.getItem("watched"))||[];if(null===e)return;return e}catch(e){console.log(e)}})();l(e)})),s.btnQueueHeaderEl.addEventListener("click",(async()=>{const e=await(async()=>{try{const e=JSON.parse(localStorage.getItem("queue"))||[];if(null===e)return;return e}catch(e){console.log(e)}})();l(e)}));
//# sourceMappingURL=library.16037ca7.js.map
