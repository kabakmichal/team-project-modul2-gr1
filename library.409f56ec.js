(()=>{const e={openModalBtn:document.querySelector("[data-modal-team-open]"),closeModalBtn:document.querySelector("[data-modal-team-close]"),modal:document.querySelector("[data-modal-team]")};function a(){e.modal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",a),e.closeModalBtn.addEventListener("click",a),document.addEventListener("keydown",(a=>{"Escape"===a.code&&e.modal.classList.add("is-hidden")}))})();(()=>{const e={openModalBtn:document.querySelector("[login-open]"),closeModalBtn:document.querySelector("[login-close]"),modal:document.querySelector("[login-modal]")};function a(){e.modal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",a),e.closeModalBtn.addEventListener("click",a)})();const e=document.querySelector(".modal__movie-box");let a=async a=>{e.innerHTML="";const{imgAlt:t,poster_path:o,title:n,name:l,genres:s,vote_average:d,vote_count:i,popularity:c,overview:r}=a;let m=`https://image.tmdb.org/t/p/w300${o}`;null===o&&(m=new URL("https://picsum.photos/id/237/274/398"));let u=`<div class="modal__movie-box-separation">\n                <div class="modal__movie-box-photo"><img class="modal__movie-image" src="${m}"  alt="Poster of: ${t}"\n                        loading="lazy"></div>\n                <div class="modal__movie-box-info">\n                    <h2 class="modal__movie-box-title">${n||l}</h2>\n                    <ul class="modal__movie-box-details">\n                        <li class="modal__movie-details-li"><span class="modal__movie-details-label">Vote /Votes </span><span><span class="modal__movie-details-vote">${Number(d).toFixed(1)}</span> / ${i}</span></span></li>\n                        </li>\n                        <li class="modal__movie-details-li"><span class="modal__movie-details-label">Popularity</span><span\n                                class="modal__movie-details-value">${Number(c).toFixed(0)}</span></li>\n                        <li class="modal__movie-details-li"><span class=" modal__movie-details-label">Original Title</span><span\n                                class="modal__movie-details-value modal__movie-details-title">${n||l}</span></li>\n                        <li class="modal__movie-details-li"><span class=" modal__movie-details-label">Genre</span><span\n                                class="modal__movie-details-value">${s.map((e=>e.name)).join(", ")}</span></li>\n                        </li>\n                    </ul>\n                    <h3 class="modal__movie-about-label">About</h3>\n                    <p class="modal__movie-about-text">${r}</p>\n                    <div class="modal__movie-btns--wrapper">\n                        <button type="button" class="modal__movie-btns modal__movie-btns--watch" data-name="watched"\n                            >Add to watched</button>\n                        <button type="button" class="modal__movie-btns modal__movie-btns-queue" data-name="queue">Add\n                            to queue</button>\n                    </div>\n                </div>\n            </div>`;return e.insertAdjacentHTML("beforeend",u)};const t=e=>{const a=JSON.parse(localStorage.getItem("queue"))||[];if(!a.find((a=>a.media_type===e.media_type&&a.id===e.id))){a.push(e);try{localStorage.setItem("queue",JSON.stringify(a))}catch(e){console.error("Set state error: ",e.message)}}},o=e=>{const a=JSON.parse(localStorage.getItem("watched"))||[];if(!a.find((a=>a.media_type===e.media_type&&a.id===e.id))){a.push(e);try{localStorage.setItem("watched",JSON.stringify(a))}catch(e){console.error("Set state error: ",e.message)}}};(()=>{const n={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};function s(){n.modal.classList.toggle("is-hidden")}n.openModalBtn.addEventListener("click",(e=>{if("movie-card"!==e.target.offsetParent.className)return;s();let d=e.target.offsetParent.dataset.id,i=JSON.parse(localStorage.getItem(l))[d];a(i),n.modal.addEventListener("click",(e=>{"queue"===e.target.dataset.name&&t(i),"watched"===e.target.dataset.name&&o(i)}))})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&s()})),n.closeModalBtn.addEventListener("click",(()=>{e.innerHTML="",s()}))})();const n=document.querySelector(".gallery");let l="";const s=async e=>{n.innerHTML="";let a=0;const t=e.map((({id:e,media_type:t,poster_path:o,release_date:n,first_air_date:l,title:s,name:d,genres:i})=>{let c=n||l||"????";if("person"!==t)return`<div class="movie-card" data-id="${a++}" data-type="${t||"movie"}">\n      <img class="movie-card__img" src="https://image.tmdb.org/t/p/w500/${o}" onerror="this.src = 'https://picsum.photos/id/237/274/398'";alt="image of movie" loading="lazy" />\n      <div class="movie-card__info">\n          <p class="movie-card__title">\n              <span>${s||d}</span>\n          </p>\n      <div class= "genreDate">\n          <p class="movie-card__genre">\n              <span>${i.map((e=>e.name)).splice(0,2).join(", ")}</span>\n          </p>\n          <p class="movie-card__year">| ${c.slice(0,4)||""}\n              <span></span>\n          </p>\n      </div>\n      </div>\n  </div>\n  `})).join("");return n.insertAdjacentHTML("beforeend",t)},d=async()=>{try{const e=JSON.parse(localStorage.getItem("watched"))||[];if(null===e)return;return l="watched",e}catch(e){console.log(e)}},i={btnWatchedHeaderEl:document.querySelector(".header-watched"),btnQueueHeaderEl:document.querySelector(".header-queue")};i.btnWatchedHeaderEl.addEventListener("click",(async()=>{const e=await d();s(e)})),i.btnQueueHeaderEl.addEventListener("click",(async()=>{const e=await(async()=>{try{const e=JSON.parse(localStorage.getItem("queue"))||[];if(null===e)return;return l="queue",e}catch(e){console.log(e)}})();s(e)})),window.onload=async function(e){e.preventDefault();const a=await d();s(a)};
//# sourceMappingURL=library.409f56ec.js.map
